<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirm Your Secret</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        .reveal-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        .reveal-btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Confirm Your Secret</h1>
    <p>Please click the button below to reveal your secret.</p>
    <button class="reveal-btn" onclick="revealSecret()">Reveal Secret</button>

    <div id="secretContent" style="display: none;">
        <h3>Your Secret:</h3>
        <p id="secretText"></p>
    </div>

    <script>
        function revealSecret() {
            // Your encrypted secret here
            const encryptedSecret = "ENCRYPTED_SECRET_HERE"; // Replace with your actual encrypted secret

            // Example of private key in PEM format (use your actual private key here)
            const pemPrivateKey = `
                -----BEGIN RSA PRIVATE KEY-----
                MIIEowIBAAKCAQEAycbP9IKtlDPtium/AeERWCUpcgDQVJYrL3KzUSr5f2m5Wcjr
                Aj98BCg7Mhy6OyXrw+u/ON7UUdEWyVNEIi2L7snV0po5/qLRfIi2qPqjsYz2l/9c
                6BLZ9LfwLst0aXuL4eHZVkM0cBOEFUjF+ivMCI2448rRswtkP2eRCGqT+55Pj7kU
                +Q8NX92U091sL76sVRe857ZFDONrT6EpGHUYVsL+qh2ovERkLh0FJQXjd62OkszG
                vxrJvqnrLgPh6LqZFJ2MIDT9N0y2pixSUh6P2bvl9n1yJwkE6i9V2MgRsXPfcHGH
                VhXjkukHuO6ijjnq23b9mxCUv8hjj9LTscEa+QIDAQABAoIBABj6nkroPzcozeA+
                ZfwvEdfGKKEpiEuNwu80Srj30ibw/oD8IQUduStwlDzKFqSfjKuBTKJsiin4xv00
                bCuzqhjtGVCMRuAG5a/TjZKnY0q7Jy8+Qzui/c16/zu5Hy0Mc47f8pO9wnOaJDtY
                T33+xwWguddQB/Fw2GpgVrGNNCBYIA+5BtgI62D/7bIp2T3t408wDV9EJlomiuXB
                sVZizSa3ppK8L6uxzwmd90Uxjzh1M9uGUlohCpVM85jc021L2VotrryFqOlKZytQ
                wZLn/DsC68aABDZNI7zbCwi5u5ujT3hJP5D0w+2hY/Tdy0qXPWuXLVvsFw2SUhip
                dqUZTgsCgYEA6NVJwO9ss57RzGppwM29khmOjK29PqI/gheY3OR9XvNGFcAfW4Y4
                gZ2nXnuCkqfGUSD+Q+QZZY52E+2v6hGXvzkxja4JdjKYV3OprGAMWJGatiT1u7AI
                IAH1woYNGheyvTBETn8sQaXOHk2WRqPBQMQu6W1dQx6zbMexE/Bs/ksCgYEA3dp0
                K25wlSwSUZ1jQmEZ1phNf10MmFkUKAWw5B7tcnCNWGmWj7rfRXdeenoNFjzMHscb
                N3myhYZCO4Ysp1aBFie/wCGvacpuTDiucrvxu380/lGMwojcvjOToLhAQ/xMjjFS
                4s6qqmV45D82+GY6oS1YUe0FuNSydseZSnaK8UsCgYEAqFg2yGoUhVbKyGsUZZQc
                gfs6h1rDXvr+wjf/jY8jWri4rtdHlOxaBNWRgw34XcMy78vULBBLkJNNqqELtUjd
                GCTpQFBahPyWC30UbA7SPmOgohvdFMR1S3c/U1OLO5dw47t3V+45eInCm0Rr6E1U
                WFjAtoQdj38uKfPEg+8tTzsCgYAC/Fen5fqZ51fvxUB6ujfQzYfteOEcg8Zjq3/v
                8gKcEau1TuZ51LgAhVS+LTpT3Ema+G8DVh3y8hWeG3YqYl2mYK6R9WIY+GJ3oCOo
                46KjNVkPOyW70H+4B5WrCg/DWnflSgClkMZ3OJph5//jY+zSEnwnzhrPm/0y4AjO
                Gb5Q9QKBgHG+FdHphRuCdLJh+Q5FMkiVysZ0pUVrJJoTZw4luqHWE7ZyMgHkokGO
                JH0e9ZnCHv0Fma3M8ZZ3HdxHhFMBKpAn0ngQhXhX79hHKR7XA1hx4qJluC1gGElB
                5F8gpJkajeAvFZv7XlKXVZM+SCUPVit8u5WCr3R9BLbMyKetCy0a
                -----END RSA PRIVATE KEY-----
            `;

            // Convert PEM to binary (DER) format
            const binaryDerString = window.atob(pemPrivateKey.replace(/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/g, '').trim());
            const binaryDer = str2ab(binaryDerString);

            // Import the private key using Web Crypto API
            crypto.subtle.importKey(
                "pkcs8",
                binaryDer,
                {
                    name: "RSA-OAEP",
                    hash: { name: "SHA-256" }
                },
                false,
                ["decrypt"]
            ).then(function(privateKey) {
                // Decrypt the secret
                return crypto.subtle.decrypt(
                    {
                        name: "RSA-OAEP"
                    },
                    privateKey,
                    new Uint8Array(atob(encryptedSecret).split("").map(c => c.charCodeAt(0)))
                );
            }).then(function(decryptedArrayBuffer) {
                // Convert decrypted data to string and display it
                const decoder = new TextDecoder();
                const decryptedText = decoder.decode(decryptedArrayBuffer);
                document.getElementById("secretText").innerText = decryptedText;
                document.getElementById("secretContent").style.display = "block";
            }).catch(function(err) {
                console.error("Error decrypting secret:", err);
            });
        }

        // Helper function to convert binary string to ArrayBuffer
        function str2ab(str) {
            const buf = new ArrayBuffer(str.length);
            const view = new Uint8Array(buf);
            for (let i = 0; i < str.length; i++) {
                view[i] = str.charCodeAt(i) & 0xFF;
            }
            return buf;
        }
    </script>
</body>
</html>
